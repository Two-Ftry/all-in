<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible"
        content="ie=edge">
    <title>My SSR</title>
</head>

<body>
    3333
    <script>
        var arr = [
            { parent_id: '0', id: '1', value: 'xxx' },
            { parent_id: '1', id: '2', value: 'xxx' },
            { parent_id: '1', id: '3', value: 'xxx' },
            { parent_id: '2', id: '4', value: 'xxx' },
            { parent_id: '4', id: '5', value: 'xxx' },
            { parent_id: '5', id: '6', value: 'xxx' }
        ];

        function findNodeById(tree, id) {
            var stack = [];
            var found = false;
            var foundNode = null;
            if (tree) {
                for (var key in tree) {
                    if (key === id) {
                        found = true;
                        foundNode = tree[key];
                    }
                    if (found) {
                        break;
                    }
                    stack.push(tree[key]);
                    while (stack.length !== 0) {
                        const node = stack.pop();
                        if (found) {
                            break;
                        }
                        var children = node.children;
                        if (children) {
                            for (var i = 0, len = children.length; i < len; i++) {
                                const item = children[i];
                                for (var key in item) {
                                    if (key === id) {
                                        found = true;
                                        foundNode = item[key];
                                        break;
                                    }
                                    stack.push(item[key]);
                                }

                            }
                        }
                    }
                    if (found) {
                        break;
                    }
                }
            }
            return foundNode;
        }

        function arr2Tree(arr) {
            var tree = {};

            tree[arr[0].id] = { children: [] };

            arr.forEach(function (data, index) {
                if (index === 0) {
                    return;
                }
                var parent = findNodeById(tree, data.parent_id);
                if (!parent.children) {
                    parent.children = [];
                }
                var item = {};
                item[data.id] = {};
                parent.children.push(item);
            });

            return tree;
        }

        var r = arr2Tree(arr)
        console.log('@@@@', r)
    </script>
</body>

</html>